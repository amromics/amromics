webpackJsonp([10],{"1erZ":function(t,e){},"8Hrj":function(t,e){},"9Keu":function(t,e){},"Ak1/":function(t,e){},EEll:function(t,e){},"L+N6":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},s,!1,function(t){a("ymcE")},null,null).exports,r=a("/ocq"),l=a("INCx"),o=a.n(l),c=a("Xxa5"),d=a.n(c),h=a("//Fk"),p=a.n(h),u=a("exGp"),v=a.n(u),m=a("bOdI"),g=a.n(m),_=a("Zrlr"),f=a.n(_),y=a("wxAW"),w=a.n(y),b=a("ikxi"),k=a.n(b),C=(a("+WEU"),function(){function t(e){f()(this,t),this.container=e,this.input=void 0,this.list_data=[],this.list_labels=[],this.props={width:1200,height:400,title:"N50 chart",background_color:"rgba(255, 99, 132, 0.6)",line_color:"rgb(54, 162, 235)",x_label:"Num contigs",y_label:"Sum length"}}return w()(t,[{key:"load",value:function(t){this.input=t,this.list_data=[],this.list_labels=[],this.sum=0;for(var e=0;e<this.input.length;e++)this.sum=this.sum+this.input[e].length,this.list_data.push(this.sum),this.list_labels.push(e+1)}},{key:"setOptions",value:function(t){this.props.width=t.width,this.props.height=t.height,void 0!=t.title&&(this.props.title=t.title),void 0!=t.background_color&&(this.props.background_color=t.background_color),void 0!=t.line_color&&(this.props.line_color=t.line_color),void 0!=t.x_label&&(this.props.x_label=t.x_label),void 0!=t.y_label&&(this.props.y_label=t.y_label)}},{key:"draw",value:function(){this.container.innerHTML="";var t=document.createElement("canvas");t.id="cv_chart",t.width=this.props.width,t.height=this.props.height,this.container.appendChild(t);var e={labels:this.list_labels,datasets:[{label:"Sum of length",data:this.list_data,backgroundColor:[this.props.background_color],borderColor:this.props.line_color,fill:!1}]};new k.a(t,{type:"line",data:e,options:{responsive:!0,title:{display:!0,text:this.props.title},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:this.props.x_label}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:this.props.y_label}}]},annotation:{annotations:[{type:"line",mode:"horizontal",scaleID:"y-axis-0",borderColor:"red",value:this.sum/2,label:{content:this.sum/2,enabled:!0}}]}}})}}]),t}()),x=a("vwbq"),j=function(){function t(e){f()(this,t),this.container=e,this.contigs=[],this.knowngenes=[],this.gc_skew=[],this.gc_content=void 0,this.gc_content_window=1e3,this.gc_content_step=100,this.props={width:1200,highlight:[{type:"AMR",color:"#A71D31"},{type:"VIR",color:"#0F5257"}],color:"#F3C366"},this.scale=.1,this.genUI()}return w()(t,[{key:"genUI",value:function(){this.container.innerHTML="",this.track_div=document.createElement("div"),this.track_div.id="track_div",this.track_div.style.width=this.props.width+"px",this.track_div.style.height="500px",this.track_div.style.padding="0px",this.track_div.style.margin="0px",this.track_div.style.float="left",this.track_div.style.overflowX="scroll";var t=document.createElement("div");t.style.width=this.props.width+"px",t.style.height="40px",t.style.padding="0px",t.style.margin="0px",t.style.borderBottom="1px solid #a6a6a6";var e=document.createElement("div");e.style.margin="10px",e.style.float="right";var a=document.createElement("button");a.style.backgroundImage="none",a.style.border="1px solid transparent",a.style.borderRadius="4px",a.textContent="+",a.addEventListener("click",this.zoomIn.bind(this));var n=document.createElement("button");n.style.backgroundImage="none",n.style.border="1px solid transparent",n.style.borderRadius="4px",n.textContent="-",n.addEventListener("click",this.zoomOut.bind(this));var s=document.createElement("div");s.style.margin="10px",s.style.float="left",this.contig_select=document.createElement("select"),this.contig_select.id="select_contig",this.contig_select.addEventListener("change",this.changeContigSelect.bind(this)),this.control_loading=document.createElement("div"),this.control_loading.style.margin="10px",this.control_loading.style.float="left",this.control_loading.innerText="",s.appendChild(this.contig_select),e.appendChild(n),e.appendChild(a),t.appendChild(e),t.appendChild(s),t.appendChild(this.control_loading);var i=document.createElement("div");i.style.width=this.props.width+"px",i.style.height="500px",i.style.padding="0px",i.style.margin="0px",i.appendChild(this.track_div);var r=document.createElement("div");r.style.width=this.props.width+"px",r.style.height="540px",r.style.border="1px solid gray",r.appendChild(t),r.appendChild(i),this.container.appendChild(r)}},{key:"load",value:function(t,e,a,n){this.contigs=t,this.knowngenes=e,this.gc_skew=a,this.gc_content=n,console.log(this.gc_content);for(var s=0;s<this.contigs.length;s++){var i=document.createElement("option");i.appendChild(document.createTextNode(this.contigs[s].name)),i.value=this.contigs[s].name,document.getElementById("select_contig").add(i)}this.current_contig=this.contigs[0]}},{key:"setOptions",value:function(t){this.props.width=t.width,void 0!=t.highlight&&(this.props.highlight=t.highlight),void 0!=t.color&&(this.props.color=t.color),this.genUI(),this.load(this.contigs,this.knowngenes,this.gc_skew,this.gc_content)}},{key:"draw",value:function(){this.drawContig(),this.drawKnowgenes(),this.drawSkew(),this.drawContent()}},{key:"drawContig",value:function(){var t=this.props.width,e=20,a=x.i("#track_div").append("svg").attr("width",t>this.current_contig.length*this.scale?t:this.current_contig.length*this.scale).attr("height",40),n=a.append("g").attr("transform","translate(0,"+e+")");n.append("rect").attr("x",0).attr("y",10).attr("width",t).attr("height",20).style("fill","#EEE"),n.append("rect").attr("x",0).attr("y",0).attr("width",this.current_contig.length*this.scale).attr("height",20).attr("rx",10).style("stroke",function(t){return x.f("#999").darker()}).style("fill","#AAA"),n.append("text").attr("x",10).attr("y",15).text(this.current_contig.name);var s=x.h().range([0,this.current_contig.length*this.scale]).domain([100,this.current_contig.length]),i=x.c(s).ticks(this.current_contig.length*this.scale/100);a.append("g").attr("transform","translate(0,"+e+")").call(i)}},{key:"drawKnowgenes",value:function(){for(var t=[],e=0;e<this.knowngenes.length;e++)this.knowngenes[e].contig==this.current_contig.name&&t.push({contig:this.knowngenes[e].contig,start:this.knowngenes[e].start,end:this.knowngenes[e].end,name:this.knowngenes[e].name,strain:this.knowngenes[e].strain,type:this.knowngenes[e].type,product:this.knowngenes[e].product});var a=this.props.width,n=x.i("#track_div").append("svg").attr("width",a>this.current_contig.length*this.scale?a:this.current_contig.length*this.scale).attr("height",150).append("g").attr("transform","translate(0,0)");n.append("text").attr("x",10).attr("y",15).text("Genes");var s=x.i("#track_div").append("div").style("opacity",0).attr("class","tooltip").style("position","relative").style("width","300px").style("font-size","small").style("background-color","white").style("border","solid").style("border-color","#666").style("border-width","1px").style("border-radius","5px").style("padding","5px"),i=function(t){s.style("opacity",1),x.i(this).style("stroke","black").style("opacity",1)},r=function(t){s.html(t.start+" ->"+t.end+":"+t.name+"<br><b>Type</b>: "+t.type+"<br/><b>Product</b>:"+t.product).style("left",x.e(this)[0]+20+"px").style("top",x.e(this)[1]-100+"px")},l=function(t){console.log("mouse leave"),s.style("opacity",0),x.i(this).style("stroke","white")};n.append("rect").attr("x",0).attr("y",0).attr("width",a>this.current_contig.length*this.scale?a:this.current_contig.length*this.scale).attr("height",2).style("fill","#EEE");for(e=0;e<t.length;e++)this.drawGeneBlock(e,t[e],n,t[e].start*this.scale,t[e].end*this.scale,t[e].strain,t[e].name,this.props.color,i,r,l)}},{key:"drawGeneBlock",value:function(t,e,a,n,s,i,r,l,o,c,d){var h=t%4+1;"+"==i?a.append("polygon").datum(e).attr("points",n+","+(10+20*h)+" "+(n+10)+","+(20+20*h)+" "+s+","+(20+20*h)+" "+s+","+(0+20*h)+" "+(n+10)+","+(0+20*h)).style("fill",l).on("mouseover",o).on("mousemove",c).on("mouseleave",d):a.append("polygon").datum(e).attr("points",n+","+(0+20*h)+" "+n+","+(20+20*h)+" "+(s-10)+","+(20+20*h)+" "+s+","+(10+20*h)+" "+(s-10)+","+(0+20*h)).style("fill",l).on("mouseover",o).on("mousemove",c).on("mouseleave",d),a.append("text").attr("text-anchor","start").attr("x",s+5).attr("y",15+20*h).text(r)}},{key:"drawSkew",value:function(){for(var t=[],e=0,a=0;a<this.gc_skew.length;a++)if(this.gc_skew[a].contig.split(" ")[0]==this.current_contig.name)for(var n=0,s=0;s<this.gc_skew[a].GC.length;s++)e<(n+=this.gc_skew[a].GC[s])&&(e=n),t.push({contig:this.gc_skew[a].contig.split(" ")[0],position:100*s,value:this.gc_skew[a].GC[s],cum:n});var i=this.props.width,r=x.i("#track_div").append("svg").attr("width",i>this.current_contig.length*this.scale?i:this.current_contig.length*this.scale).attr("height",150).append("g").attr("transform","translate(0,30)");r.append("text").attr("x",10).attr("y",-10).text("GC skew");var l=t[0];for(a=1;a<t.length;a++)this.drawSkewLine(r,t[a].position*this.scale,100*this.scale,t[a],l,e),l=t[a];r.append("line").attr("x1",0).attr("y1",50).attr("x2",100*(t.length+10)*this.scale).attr("y2",50).style("stroke","#0C4524").style("stroke-width",1),r.append("line").attr("x1",0).attr("y1",0).attr("x2",100*(t.length+10)*this.scale).attr("y2",0).style("stroke-dasharray","5,3").style("stroke","#0C4524").style("stroke-width",1),r.append("line").attr("x1",0).attr("y1",100).attr("x2",100*(t.length+10)*this.scale).attr("y2",100).style("stroke-dasharray","5,3").style("stroke","#0C4524").style("stroke-width",1),r.append("text").attr("x",0).attr("y",10).text("1"),r.append("text").attr("x",0).attr("y",100).text("-1")}},{key:"drawSkewLine",value:function(t,e,a,n,s,i){t.append("line").attr("x1",e-a).attr("y1",50-50*s.value).attr("x2",e).attr("y2",50-50*n.value).style("fill","#0C4524").style("stroke","black").style("stroke-width",1)}},{key:"drawContent",value:function(){for(var t=[],e=0;e<this.gc_content.length;e++)if(this.gc_content[e].contig.split(" ")[0]==this.current_contig.name)for(var a=0;a<this.gc_content[e].GC.length;a++)t.push({contig:this.gc_content[e].contig.split(" ")[0],position:100*a,value:100*this.gc_content[e].GC[a]});var n=this.props.width,s=x.i("#track_div").append("svg").attr("width",n>this.current_contig.length*this.scale?n:this.current_contig.length*this.scale).attr("height",120).append("g").attr("transform","translate(0,30)");s.append("text").attr("x",10).attr("y",-10).text("GC content");var i=t[0].value;for(e=0;e<t.length;e++)this.drawContentLine(s,t[e].position*this.scale,100*this.scale,t[e].value,i),i=t[e].value;s.append("line").attr("x1",0).attr("y1",150).attr("x2",100*(t.length+10)*this.scale).attr("y2",150).style("stroke","#0C4524").style("stroke-width",1),s.append("line").attr("x1",0).attr("y1",0).attr("x2",100*(t.length+10)*this.scale).attr("y2",0).style("stroke-dasharray","5,3").style("stroke","#0C4524").style("stroke-width",1),s.append("line").attr("x1",0).attr("y1",75).attr("x2",100*(t.length+10)*this.scale).attr("y2",75).style("stroke-dasharray","5,3").style("stroke","#0C4524").style("stroke-width",1),s.append("text").attr("x",0).attr("y",75).text("50%"),s.append("text").attr("x",0).attr("y",10).text("100%")}},{key:"drawContentLine",value:function(t,e,a,n,s){t.append("line").attr("x1",e-a).attr("y1",150-1.5*s).attr("x2",e).attr("y2",150-1.5*n).style("fill","#0C4524").style("stroke","black").style("stroke-width",1)}},{key:"drawAgain",value:function(){this.control_loading.innerText="Loading...",this.track_div.innerHTML="",this.drawContig(),this.drawKnowgenes(),this.drawSkew(),this.drawContent(),this.control_loading.innerText=""}},{key:"changeContigSelect",value:function(){if(void 0!=this.contigs){for(var t=0;t<this.contigs.length;t++)if(this.contigs[t].name==this.contig_select.value){this.current_contig=this.contigs[t];break}this.drawAgain()}}},{key:"changeContig",value:function(t){for(var e=0;e<this.contigs.length;e++)if(this.contigs[e].name==t){this.current_contig=this.contigs[e];break}this.contig_select.value=t,this.drawAgain()}},{key:"zoomIn",value:function(){this.scale<1&&(this.scale=this.scale+.01),this.drawAgain()}},{key:"zoomOut",value:function(){this.scale>.01&&(this.scale=this.scale-.01),this.drawAgain()}},{key:"locatePosition",value:function(t){var e=t*this.scale;this.track_div.scrollLeft=e-this.props.width/2}}]),t}(),E=a("lHA8"),D=a.n(E),A=a("tPkG"),T=a.n(A),G=function(){function t(e){f()(this,t),this.container=e,this.container_id=this.container.id,this.props={width:300,height:300};var a=document.createElement("div"),n=[{label:"AMR gene",color:"#fd6a62"},{label:"Virulome gene",color:"#bebada"},{label:"GC skew",color:"black"}];for(var s in n){var i=document.createElement("div");i.style.width="20px",i.style.height="20px",i.style.float="left",i.style.marginRight="3px",i.style.backgroundColor=n[s].color;var r=document.createElement("div");r.innerHTML=n[s].label,r.style.float="left";var l=document.createElement("div");l.style.float="left",l.style.marginRight="20px",l.style.marginTop="10px",l.appendChild(i),l.appendChild(r),a.appendChild(l)}this.circos_container=document.createElement("div"),this.circos_container.id="circos_view",this.container.appendChild(this.circos_container),this.container.appendChild(a)}return w()(t,[{key:"load",value:function(t,e,a,n){this.contigs=t;var s=new D.a;this.amr_data=[];for(var i=0;i<e.length;i++)this.amr_data.push({block_id:e[i].sequence,start:e[i].start,end:e[i].end,label:e[i].gene}),s.add(e[i].sequence);this.vir_data=[];for(i=0;i<a.length;i++)this.vir_data.push({block_id:a[i].sequence,start:a[i].start,end:a[i].end,label:a[i].gene}),s.add(a[i].sequence);this.skew_data=[];for(i=0;i<n.length;i++)if(s.has(n[i].contig.split(" ")[0]))for(var r=0;r<n[i].GC.length;r++)this.skew_data.push({block_id:n[i].contig.split(" ")[0],position:100*r+1e3,value:n[i].GC[r]});this._contig=[];for(i=0;i<this.contigs.length;i++){var l=this.contigs[i].name.split(" ")[0];s.has(l)&&this._contig.push({len:this.contigs[i].length,color:"#bc80bd",label:l.split("_")[1],id:l})}}},{key:"setOptions",value:function(t){this.props.width=t.width,this.props.height=t.height}},{key:"draw",value:function(){var t=this.container;this._circos=new T.a({container:"#"+this.circos_container.id,width:this.props.width,height:this.props.height});var e=this.props.width/100,a={innerRadius:40*e,outerRadius:45*e,cornerRadius:3,gap:.02,labels:{display:!0,position:"center",size:"10px",color:"#333333",radialOffset:30},ticks:{display:!1,color:"grey",spacing:1e7,labels:!0,labelSpacing:10,labelDenominator:1e6,labelDisplay0:!0,labelSize:"10px",labelColor:"#000000",labelFont:"default",majorSpacing:5,size:{minor:2,major:5}},tooltipContent:function(t,e){return console.log(t),"<h5>"+t.label+"</h5>"},events:{"click.alert":function(e,a,n,s){t.dispatchEvent(new CustomEvent("contig_select",{detail:e.id})),n[a].childNodes[0].setAttribute("style","fill: #7c417c")},mouseover:function(t,e,a,n){a[e].childNodes[0].setAttribute("style","fill: #9d529e")},mouseleave:function(t,e,a,n){a[e].childNodes[0].setAttribute("style","fill: #bc80bd")}}},n={innerRadius:.7,outerRadius:.8,min:null,max:null,color:"#fd6a62",strokeColor:"#fd6a62",strokeWidth:1,direction:"out",thickness:10*e,radialMargin:2,margin:2,opacity:1,logScale:!1,tooltipContent:function(t){return"<div>"+t.label+"</div><i>Click to locate on browser</i>"},events:{"click.alert":function(e,a,n,s){t.dispatchEvent(new CustomEvent("element_select",{detail:{contig:e.block_id,pos:o()((parseInt(e.start)+parseInt(e.end))/2)}}))}}},s={innerRadius:.55,outerRadius:.65,min:null,max:null,color:"#bebada",strokeColor:"#bebada",strokeWidth:1,direction:"out",thickness:10*e,radialMargin:2,margin:2,opacity:1,logScale:!1,tooltipContent:function(t){return""+t.label},events:{"click.alert":function(e,a,n,s){t.dispatchEvent(new CustomEvent("element_select",{detail:{contig:e.block_id,pos:o()((parseInt(e.start)+parseInt(e.end))/2)}}))}}};this._circos.layout(this._contig,a),this._circos.stack("stack1",this.amr_data,n),this._circos.stack("stack2",this.vir_data,s),this._circos.line("line1",this.skew_data,{innerRadius:.8,outerRadius:.95,min:null,max:null,color:"black",strokeColor:"black",strokeWidth:1,direction:"out",opacity:1,logScale:!0,axes:[{color:"blue",position:1e-8,thickness:1,opacity:.5}],events:{}}),this._circos.render()}}]),t}(),L=function(){function t(e){f()(this,t),this.container=e,this.props={width:800,height:400};var a=document.createElement("canvas");a.id="pie_canvas",a.width=this.props.width,a.height=this.props.height,this.container.appendChild(a)}return w()(t,[{key:"load",value:function(t){for(var e=[],a=[],n=0;n<t.length;n++)t[n].num>0&&(e.push(t[n].num),a.push(t[n].name+t[n].des));this.data={datasets:[{data:e,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}],labels:a}}},{key:"setOptions",value:function(t){this.props.width=t.width,this.props.height=t.height,this.container.innerHTML="";var e=document.createElement("canvas");e.id="pie_canvas",e.width=this.props.width,e.height=this.props.height,this.container.appendChild(e)}},{key:"draw",value:function(){var t=document.getElementById("pie_canvas");new k.a(t,{type:"pie",data:this.data,options:{responsive:!0}})}}]),t}(),S=function(){function t(e){f()(this,t),this.container=e,this.props={width:800,height:400};var a=document.createElement("canvas");a.id="distribution_canvas",a.width=this.props.width,a.height=this.props.height,this.container.appendChild(a)}return w()(t,[{key:"load",value:function(t){for(var e=[],a=[],n=0;n<t.length;n++)e.push(parseInt(t[n].noisolates)),a.push(t[n].id);this.data={datasets:[{label:"Gene count distribution",data:e,backgroundColor:["rgba(255, 99, 132, 0.6)"],borderColor:["rgba(255, 99, 132, 0.2)"]}],labels:a}}},{key:"setOptions",value:function(t){this.props.width=t.width,this.props.height=t.height,this.container.innerHTML="";var e=document.createElement("canvas");e.id="distribution_canvas",e.width=this.props.width,e.height=this.props.height,this.container.appendChild(e)}},{key:"draw",value:function(){var t=document.getElementById("distribution_canvas");new k.a(t,{type:"line",data:this.data,options:{responsive:!0}})}}]),t}(),R=a("fZjL"),z=a.n(R),F=a("bKau"),I=a.n(F),N=function(){function t(e){f()(this,t),this.container=e,this.props={width:800,height:800,color:"#000"};var a=document.createElement("div");a.style.width="100%",a.style.height="40px",a.style.padding="0px",a.style.margin="0px",a.style.borderBottom="1px solid #aaa";var n=document.createElement("div");n.style.float="right",this.type_select=document.createElement("select"),this.type_select.style.border="1px solid #aaa",this.type_select.style.borderRadius="3px",this.type_select.style.padding="4px",this.type_select.style.backgroundColor="transparent";var s=document.createElement("option");s.appendChild(document.createTextNode("Rectangular")),s.value="rectangular",this.type_select.appendChild(s);var i=document.createElement("option");i.appendChild(document.createTextNode("Radial")),i.value="radial",this.type_select.appendChild(i);var r=document.createElement("option");r.appendChild(document.createTextNode("Circular")),r.value="circular",this.type_select.appendChild(r);var l=document.createElement("option");l.appendChild(document.createTextNode("Diagonal")),l.value="diagonal",this.type_select.appendChild(l);var o=document.createElement("option");o.appendChild(document.createTextNode("Hierarchical")),o.value="hierarchical",this.type_select.appendChild(o),this.type_select.addEventListener("change",this.changeType.bind(this)),n.appendChild(this.type_select),this.meta_select=document.createElement("select"),this.meta_select.style.border="1px solid #aaa",this.meta_select.style.borderRadius="3px",this.meta_select.style.padding="4px",this.meta_select.style.backgroundColor="transparent";var c=document.createElement("option");c.appendChild(document.createTextNode("Select metadata")),c.value="",this.meta_select.appendChild(c),a.appendChild(this.meta_select),a.appendChild(n),this.container.appendChild(a);var d=document.createElement("div");d.id="phy_tree",d.style.height=this.props.height+"px",this.container.appendChild(d),this.legend_container=document.createElement("div"),this.container.appendChild(this.legend_container),this.type="rectangular"}return w()(t,[{key:"load",value:function(t,e){this.newick_tree=t,this.metadata=e,this.columns=[],this.metadata_style={};var a=["green","red","yellow","peru","chocolate","pink","#C83200","#CD3700","#FF6103","#CC7722","#FD6302","#883000","#FFBF00","gold","#CF9812A","coral","pumpkin","tomato","brown","vermilion","orange red","orange","crimson","dark red","hot pink","smitten","magenta","indigo","blue violet"];for(var n in this.metadata)for(var s in this.metadata[n])this.columns.includes(s)||(this.columns.push(s),this.metadata_style[s]={}),this.metadata[n][s]in this.metadata_style[s]||(this.metadata_style[s][this.metadata[n][s]]="",""!=this.metadata[n][s]?(this.metadata_style[s][this.metadata[n][s]]=a[z()(this.metadata_style[s]).indexOf(this.metadata[n][s])],z()(this.metadata_style[s]).indexOf(this.metadata[n][s])>a.length&&(this.metadata_style[s][this.metadata[n][s]]="#"+(Math.random().toString(16)+"000000").substring(2,8))):this.metadata_style[s][this.metadata[n][s]]="black");for(var s in this.columns){var i=document.createElement("option");i.appendChild(document.createTextNode(this.columns[s])),i.value=this.columns[s],this.meta_select.appendChild(i)}this.meta_select.addEventListener("change",this.changeMeta.bind(this))}},{key:"setOptions",value:function(t,e){this.props.width=t.width,this.props.height=t.height,this.metadata_style=e}},{key:"draw",value:function(){document.getElementById("phy_tree").innerHTML="",this.tree=I.a.createTree("phy_tree"),this.tree.branchColour=this.props.color,this.tree.collapsedColour=this.props.color,this.tree.alignLabels=!0,this.tree.setNodeSize(20),this.tree.setTextSize(20),this.tree.lineWidth=1,this.tree.setTreeType(this.type),this.tree.load(this.newick_tree)}},{key:"changeType",value:function(){this.type=this.type_select.value,this.draw(),""!=this.meta_select.value&&this.colorLeaves(this.meta_select.value)}},{key:"changeMeta",value:function(){var t=this.meta_select.value;this.colorLeaves(t)}},{key:"colorLeaves",value:function(t){for(var e=0;e<this.tree.leaves.length;e++){var a=this.tree.leaves[e].id.replace(/\'/g,"");this.tree.leaves[e].setDisplay({colour:this.metadata_style[t][this.metadata[a][t]],shape:"circle",size:1,leafStyle:{strokeStyle:"#000000",fillStyle:this.metadata_style[t][this.metadata[a][t]],lineWidth:1},labelStyle:{colour:this.metadata_style[t][this.metadata[a][t]],textSize:20,font:"Arial",format:"bold"}})}for(var n in this.tree.draw(),this.legend_container.innerHTML="",this.metadata_style[t]){var s=document.createElement("div");s.style.width="20px",s.style.height="20px",s.style.float="left",s.style.marginRight="3px",s.style.backgroundColor=this.metadata_style[t][n];var i=document.createElement("div");i.innerHTML=""==n?"undefined":n,i.style.float="left";var r=document.createElement("div");r.style.float="left",r.style.marginRight="20px",r.style.marginTop="10px",r.appendChild(s),r.appendChild(i),this.legend_container.appendChild(r)}this.legend_container.style.height="100px"}}]),t}(),B=a("7uhr"),H=function(){function t(e){f()(this,t),this.container=e,this.props={width:this.container.clientWidth,height:400};var a=document.createElement("div");a.id="ph_treeview",a.style.width=this.props.width/5+"px",a.style.float="left";var n=document.createElement("div");n.id="ph_heatmapview",n.style.width=this.props.width-this.props.width/5+"px",n.style.float="left",n.style.overflowX="scroll",n.style.position="relative",this.container.appendChild(a),this.container.appendChild(n),this.active_names=[],this.cell_size=20}return w()(t,[{key:"load",value:function(t,e){this.hits=e;var a=30,n=30,s=B.NewickTools.parse(t),i=0,r=z()(B.NewickTools.dfs(s));for(var l in r)i+=r[l].length;var o=i/r.length*5+10,c=this.props.width/5-n-a-o,d=x.d(s,function(t){return t.branchset}),h=[];d.height=0,h.push(d);var p=0,u=0,v=0,m=0;for(this.node_leaf=[],this.arr_sample_from_tree=[];h.length>0;){if((w=h.pop()).id=v,v++,void 0!=w.children)for(var g=0;g<w.children.length;g++)h.push(w.children[g]),w.children[g].height=w.height+w.children[g].data.length;else w.height>p&&(p=w.height),w.depth>u&&(u=w.depth),this.node_leaf.push(w),this.arr_sample_from_tree.push(w.data.name.replace(/\'/g,"")),m++}var _=m*this.cell_size;this.container.style.height=_+100+"px";var f=c/u;for((h=[]).push(d),v=0,d.ay=0;h.length>0;){if(void 0!=(w=h.pop()).children){for(g=0;g<w.children.length;g++)h.push(w.children[g]);w.ay=w.depth*f}else w.ax=v*_/m,v++,w.ay=u*f}for(var y=u;y>=0;y--)for((h=[]).push(d);h.length>0;){var w;if(void 0!=(w=h.pop()).children)for(g=0;g<w.children.length;g++)h.push(w.children[g]),w.depth==y&&(w.ax=(w.children[0].ax+w.children[1].ax)/2)}var b=x.j().size([_,c]);this.fnodes=b(d),this.genes=[];for(g=0;g<this.hits.length;g++)this.genes.includes(this.hits[g].gene)||this.genes.push(this.hits[g].gene)}},{key:"setOptions",value:function(t){this.props.width=t.width,this.props.height=t.height}},{key:"drawTree",value:function(){var t=this.active_names;document.getElementById("ph_treeview").innerHTML="";var e=30,a=30,n=60,s=30,i=this.props.width/5,r=this.node_leaf.length*this.cell_size,l=this.cell_size,o=x.i("#ph_treeview").append("svg").attr("width",i).attr("height",this.cell_size*this.node_leaf.length+e+n),c=o.append("g").attr("transform","translate("+s+","+(e+l/2)+")");this.graphic_tree=c;c.selectAll(".link").data(this.fnodes.descendants().slice(1)).enter().append("path").attr("class","link").style("stroke","black").style("fill","none").attr("d",function(t){return"M"+t.ay+","+t.ax+"L"+t.parent.ay+","+t.ax+" "+t.parent.ay+","+t.parent.ax}),t=this.active_names,c.selectAll(".node").data(this.fnodes.descendants()).enter().append("g").attr("class",function(e){return"node"+(e.children?" node--internal":" node--leaf")+(t.includes(e.data.name.replace(/\'/g,""))?" node--active":"")}).attr("transform",function(t){return"translate("+t.ay+","+t.ax+")"}),c.selectAll(".node--leaf").append("circle").attr("r",2).style("stroke","black").style("fill","black"),c.selectAll(".node--active").append("circle").attr("r",5).style("stroke","blue").style("fill","none"),c.selectAll(".connector").data(this.node_leaf).enter().append("path").attr("class","connector").attr("d",function(t){return"M"+t.ay+","+t.ax+"L"+(i+a)+","+t.ax});var d=this.arr_sample_from_tree.slice();d.reverse();var h=x.g().range([r,0]).domain(d).padding(.01);o.append("g").attr("transform","translate("+this.props.width/5+","+e+")").call(x.b(h))}},{key:"drawHeatmap",value:function(){var t=30,e=100,a=0,n=this.node_leaf.length*this.cell_size,s=this.genes.length*this.cell_size;document.getElementById("ph_heatmapview").innerHTML="";for(var i=x.i("#ph_heatmapview").append("svg").attr("width",s).attr("height",n+t+e).append("g").attr("transform","translate("+a+","+t+")"),r=x.g().range([0,this.genes.length*this.cell_size]).domain(this.genes).padding(.01),l=this.active_names,o=new D.a,c=0;c<this.hits.length;c++)l.includes(this.hits[c].sample)&&o.add(this.hits[c].gene);i.append("g").attr("transform","translate(0,"+n+") ").call(x.a(r)).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".25em").attr("transform","rotate(-65)").style("font-weight",function(t){return o.has(t)?"bold":"normal"}),l=this.active_names;var d=this.arr_sample_from_tree.slice();d.reverse();var h=x.g().range([n,0]).domain(d).padding(.01),p=x.i("#ph_heatmapview").append("div").style("opacity",0).attr("class","tooltip").style("position","absolute").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px");i.selectAll().data(this.hits,function(t){return t.sample+":"+t.gene}).enter().append("rect").attr("x",function(t){return r(t.gene)}).attr("y",function(t){return h(t.sample)}).attr("width",r.bandwidth()).attr("height",h.bandwidth()).style("fill",function(t){return l.includes(t.sample)?"#6E1214":"#DD2429"}).style("stroke","white").on("mouseover",function(t){p.style("opacity",1),x.i(this).style("stroke","black").style("opacity",1)}).on("mousemove",function(t){p.html(t.gene+" in "+t.sample+"<br>Identity: "+t.identity+"<br>"+("amr"==t.type?t.class:t.product)).style("left",x.e(this)[0]+70+"px").style("top",x.e(this)[1]+"px")}).on("mouseleave",function(t){p.style("opacity",0),x.i(this).style("stroke","white")})}},{key:"setActiveNames",value:function(t){this.active_names=t,this.draw()}},{key:"draw",value:function(){this.drawTree(),this.drawHeatmap()}}]),t}(),M=a("BO1k"),P=a.n(M),O=a("Gu7T"),U=a.n(O),q=function(){function t(e){f()(this,t),this.container=e,this.props={width:this.container.clientWidth,height:400},this.treeview=document.createElement("div"),this.treeview.id="al_treeview",this.treeview.style.width=this.props.width/5+"px",this.treeview.style.height=this.props.height+"px",this.treeview.style.float="left",this.alignmentview=document.createElement("div"),this.alignmentview.id="al_alignment",this.alignmentview.style.width=this.props.width-this.props.width/5+"px",this.alignmentview.style.height=this.props.height+"px",this.alignmentview.style.float="left",this.alignmentview.style.overflowX="scroll";var a=document.createElement("div");a.style.width=this.props.width+"px",a.style.height="40px",a.style.padding="0px",a.style.margin="0px",a.style.borderBottom="1px solid #a6a6a6";var n=document.createElement("div");n.style.margin="10px",n.style.float="right";var s=document.createElement("button");s.style.backgroundImage="none",s.style.border="1px solid transparent",s.style.borderRadius="4px",s.textContent="+",s.addEventListener("click",this.zoomIn.bind(this));var i=document.createElement("button");i.style.backgroundImage="none",i.style.border="1px solid transparent",i.style.borderRadius="4px",i.textContent="-",i.addEventListener("click",this.zoomOut.bind(this)),n.appendChild(i),n.appendChild(s),a.appendChild(n),this.control_gene=document.createElement("div"),this.control_gene.style.margin="10px",this.control_gene.style.float="left",a.appendChild(this.control_gene);var r=document.createElement("div");this.control_gene.style.margin="10px",this.control_gene.style.float="right";var l=document.createElement("input");l.setAttribute("type","radio"),l.setAttribute("name","view"),l.setAttribute("value","nucl"),l.setAttribute("checked","true"),l.addEventListener("change",this.onChangeType.bind(this));var o=document.createElement("label");o.innerHTML="Nucleotide",r.appendChild(l),r.appendChild(o);var c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name","view"),c.setAttribute("value","prot"),c.addEventListener("change",this.onChangeType.bind(this));var d=document.createElement("label");d.innerHTML="Protein",r.appendChild(c),r.appendChild(d),a.appendChild(r),this.container.appendChild(a),this.container.appendChild(this.treeview),this.container.appendChild(this.alignmentview),this.zoom_lv=3,this.current_type="nucl",this.active_names=[]}return w()(t,[{key:"load",value:function(t,e,a,n,s){this.control_gene.innerHTML=t,this.samples=a,this.phylotree=e,this.genelabel=t,this.mlst=s,this.pos=[],this.data=[];var i=[],r=0,l=[];if("nucl"==this.current_type)for(var o=0;o<this.samples.length;o++){var c=[].concat(U()(this.samples[o].seq));i.push(this.samples[o].sample),l.push({name:this.samples[o].sample}),r=c.length>r?c.length:r;for(var d=0;d<c.length;d++)this.data.push({sample:this.samples[o].sample,pos:d+1,value:c[d],type:"nucl"})}else for(o=0;o<this.samples.length;o++){var h=this.translateDNA2Prot(this.samples[o].seq);console.log(h);c=[].concat(U()(h));i.push(this.samples[o].sample),l.push({name:this.samples[o].sample}),r=c.length>r?c.length:r;for(d=0;d<c.length;d++)this.data.push({sample:this.samples[o].sample,pos:d+1,value:c[d],type:"prot"})}console.log(this.data);for(o=1;o<=r;o++)this.pos.push(o);var p=30,u=30,v=30,m=30,g=(this.pos.length,30*i.length+p+v),_=e,f=B.NewickTools.parse(_),y=0,w=z()(B.NewickTools.dfs(f));for(var b in w)y+=w[b].length;var k=y/w.length*5+10,C=this.props.width/5-m-u-k,j=x.j().size([g,C]),E=x.d(f,function(t){return t.branchset}),D=[];E.height=0,D.push(E);var A=0,T=0,G=0;for(this.node_leaf=[],this.arr_sample_from_tree=[];D.length>0;){if((R=D.pop()).id=G,G++,void 0!=R.children)for(o=0;o<R.children.length;o++)D.push(R.children[o]),R.children[o].height=R.height+R.children[o].data.length;else R.height>A&&(A=R.height),R.depth>T&&(T=R.depth),this.node_leaf.push(R),this.arr_sample_from_tree.push(R.data.name.replace(/\'/g,"")),0}var L=C/T;for((D=[]).push(E),G=0,E.ay=0;D.length>0;){if(void 0!=(R=D.pop()).children){for(o=0;o<R.children.length;o++)D.push(R.children[o]);R.ay=R.depth*L}else R.ax=30*G,G++,R.ay=T*L}for(var S=T;S>=0;S--)for((D=[]).push(E);D.length>0;){var R;if(void 0!=(R=D.pop()).children)for(o=0;o<R.children.length;o++)D.push(R.children[o]),R.depth==S&&(R.ax=(R.children[0].ax+R.children[1].ax)/2)}this.fnodes=j(E)}},{key:"setOptions",value:function(t){this.props.width=t.width,this.props.height=t.height}},{key:"setActiveNames",value:function(t){this.active_names=t,this.drawHighlighTree()}},{key:"draw",value:function(){var t=20,e=2;2==this.zoom_lv&&(t=10,e=5),1==this.zoom_lv&&(t=5,e=10);var a=30,n=30,s=30,i=30,r=t*this.pos.length+i+n,l=30*this.arr_sample_from_tree.length+a+s;this.alignmentview.innerHTML="",this.alignmentview.style.height=l+20+"px",this.treeview.style.height=l+20+"px",this.container.style.height=l+80+"px",document.getElementById(this.treeview.id).innerHTML="";var o=x.i("#"+this.treeview.id).append("svg").attr("width",this.props.width/5).attr("height",30*this.node_leaf.length+a+s),c=o.append("g").attr("transform","translate("+i+","+(a+15)+")");this.graphic_tree=c;c.selectAll(".link").data(this.fnodes.descendants().slice(1)).enter().append("path").attr("class","link").style("stroke","black").style("fill","none").attr("d",function(t){return"M"+t.ay+","+t.ax+"L"+t.parent.ay+","+t.ax+" "+t.parent.ay+","+t.parent.ax});var d=this.active_names,h=(c.selectAll(".node").data(this.fnodes.descendants()).enter().append("g").attr("class",function(t){return"node"+(t.children?" node--internal":" node--leaf")+(d.includes(t.data.name.replace(/\'/g,""))?" node--active":"")}).attr("transform",function(t){return"translate("+t.ay+","+t.ax+")"}),c.selectAll(".node--leaf").append("circle").attr("r",2).style("stroke","black").style("fill","black"),c.selectAll(".node--active").append("circle").attr("r",5).style("stroke","blue").style("fill","none"),this.arr_sample_from_tree.slice());h.reverse();var p=x.g().range([30*this.arr_sample_from_tree.length,0]).domain(h).padding(.01);o.append("g").attr("transform","translate("+this.props.width/5+","+a+")").call(x.b(p));var u=x.i("#"+this.alignmentview.id).append("svg").attr("width",r).attr("height",l).append("g").attr("transform","translate(0,"+a+")"),v=x.g().range([0,t*this.pos.length]).domain(this.pos).padding(.01),m=x.c(v);m.tickValues(v.domain().filter(function(t,a){return 0==a?a+1:(a+1)%e==0?a:""})),u.append("g").attr("transform","translate(0,0)").call(m),u.selectAll().data(this.data,function(t){return t.sample+":"+t.pos}).enter().append("rect").attr("x",function(t){return v(t.pos)}).attr("y",function(t){return p(t.sample)}).attr("width",t).attr("height",30).style("fill",function(t){if(1==this.zoom_lv&&ref_chars[t.pos-1]==t.value&&"REF"!=t.sample)return"#FFFFFF";if("nucl"==t.type){if("A"==t.value)return"#A0A0FF";if("C"==t.value)return"#FF8C4B";if("T"==t.value)return"#FF7070";if("G"==t.value)return"#A0FFA0";if("U"==t.value)return"#B8B8B8";if("-"==t.value)return"#FFFFFF"}else{if("A"==t.value)return"#C8C8C8";if("D"==t.value||"E"==t.value)return"#E60A0A";if("C"==t.value||"M"==t.value)return"#E6E600";if("K"==t.value||"R"==t.value)return"#145AFF";if("S"==t.value||"T"==t.value)return"#FA9600";if("F"==t.value||"Y"==t.value)return"#3232AA";if("N"==t.value||"Q"==t.value)return"#00DCDC";if("G"==t.value)return"#EBEBEB";if("L"==t.value||"V"==t.value||"I"==t.value)return"#0F820F";if("W"==t.value)return"#B45AB4";if("H"==t.value)return"#8282D2";if("P"==t.value)return"#DC9682";if("-"==t.value)return"#FFFFFF"}return"#000"}),3==this.zoom_lv&&u.selectAll().data(this.data,function(t){return t.sample+":"+t.pos}).enter().append("text").attr("dy",".35em").attr("x",function(e){return v(e.pos)+t/4}).attr("y",function(t){return p(t.sample)+15}).style("color","black").text(function(t){return t.value})}},{key:"drawHighlighTree",value:function(){var t=30,e=30,a=30;document.getElementById(this.treeview.id).innerHTML="";var n=x.i("#"+this.treeview.id).append("svg").attr("width",this.props.width/5).attr("height",30*this.node_leaf.length+t+e),s=n.append("g").attr("transform","translate("+a+","+(t+15)+")");this.graphic_tree=s;s.selectAll(".link").data(this.fnodes.descendants().slice(1)).enter().append("path").attr("class","link").style("stroke","black").style("fill","none").attr("d",function(t){return"M"+t.ay+","+t.ax+"L"+t.parent.ay+","+t.ax+" "+t.parent.ay+","+t.parent.ax});var i=this.active_names,r=(s.selectAll(".node").data(this.fnodes.descendants()).enter().append("g").attr("class",function(t){return"node"+(t.children?" node--internal":" node--leaf")+(i.includes(t.data.name.replace(/\'/g,""))?" node--active":"")}).attr("transform",function(t){return"translate("+t.ay+","+t.ax+")"}),s.selectAll(".node--leaf").append("circle").attr("r",2).style("stroke","black").style("fill","black"),s.selectAll(".node--active").append("circle").attr("r",5).style("stroke","blue").style("fill","none"),this.arr_sample_from_tree.slice());if(r.reverse(),void 0!=this.mlst)for(var l=0;l<r.length;l++)for(;0<this.mlst.length;l++)r[l]==this.mlst[0]&&(r[l]=r[l]+"("+this.mlst[0]+")");var o=x.g().range([30*this.arr_sample_from_tree.length,0]).domain(r).padding(.01);n.append("g").attr("transform","translate("+this.props.width/5+","+t+")").call(x.b(o))}},{key:"zoomIn",value:function(){this.zoom_lv<3&&(this.zoom_lv=this.zoom_lv+1),this.draw()}},{key:"zoomOut",value:function(){console.log("event zoom out"),this.zoom_lv>1&&(this.zoom_lv=this.zoom_lv-1),this.draw()}},{key:"onChangeType",value:function(){this.current_type=document.querySelector('input[name="view"]:checked').value,this.load(this.genelabel,this.phylotree,this.samples),this.draw()}},{key:"translateDNA2Prot",value:function(t){var e={A:["GCA","GCC","GCG","GCT"],C:["TGC","TGT"],D:["GAC","GAT"],E:["GAA","GAG"],F:["TTC","TTT"],G:["GGA","GGC","GGG","GGT"],H:["CAC","CAT"],I:["ATA","ATC","ATT"],K:["AAA","AAG"],L:["CTA","CTC","CTG","CTT","TTA","TTG"],M:["ATG"],N:["AAC","AAT"],P:["CCA","CCC","CCG","CCT"],Q:["CAA","CAG"],R:["AGA","AGG","CGA","CGC","CGG","CGT"],S:["AGC","AGT","TCA","TCC","TCG","TCT"],T:["ACA","ACC","ACG","ACT"],V:["GTA","GTC","GTG","GTT"],W:["TGG"],Y:["TAC","TAT"],"":["TAA","TAG","TGA"]},a={},n=!0,s=!1,i=void 0;try{for(var r,l=P()(z()(e));!(n=(r=l.next()).done);n=!0){var o=r.value,c=!0,d=!1,h=void 0;try{for(var p,u=P()(e[o]);!(c=(p=u.next()).done);c=!0){a[p.value]=o}}catch(t){d=!0,h=t}finally{try{!c&&u.return&&u.return()}finally{if(d)throw h}}}}catch(t){s=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw i}}var v="";t=t.replace(/\-/g,"");for(var m=0;m<t.length;m+=3){var g=t.substr(m,3);3==g.length&&(v=v.concat(a[g]))}return v}}]),t}(),V={name:"ContigLengthChart",props:["list_contig"],data:function(){return{loading:!1}},mounted:function(){this.loading=!0;var t=document.getElementById("contig_chart"),e=new C(t);e.load(this.list_contig),e.setOptions({width:1200,height:550}),e.draw(),this.loading=!1},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},method:{}},$={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"contig_chart"}})},staticRenderFns:[]};var W=a("VU/8")(V,$,!1,function(t){a("9Keu")},"data-v-e6e96148",null).exports,K=new n.a,X={name:"GenomeBrowser",props:["list_contig","knowngene","GC_content","GC_skew"],data:function(){return{loading:!1,current_zoom:3,current_type:"prot",pos_track:0,svg_title:void 0,scale:.1,current_contig:void 0,selected_contig:void 0}},mounted:function(){this.loading=!0;var t=document.getElementById("browser"),e=new j(t);e.load(this.list_contig,this.knowngene,this.GC_skew,this.GC_content),e.setOptions({width:618}),e.draw(),K.$on("contig_emited",function(t){e.changeContig(t)}),K.$on("element_emited",function(t){e.changeContig(t.contig),e.locatePosition(t.pos)}),this.loading=!1},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},method:{}},Q={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"browser"}})},staticRenderFns:[]};var J=a("VU/8")(X,Q,!1,function(t){a("1erZ")},"data-v-1ca32502",null).exports,Z={name:"GenomeCircosBrowser",props:["contigs","amr_genes","virulome_genes","skew","plasmid"],data:function(){return{loading:!1,_contig:[],amr_data:[],vir_data:[],skew_data:[]}},mounted:function(){this.loading=!0;var t=document.getElementById("circos"),e=new G(t);e.load(this.contigs,this.amr_genes,this.virulome_genes,this.skew),e.setOptions({width:500,height:500}),e.draw(),t.addEventListener("contig_select",function(t){console.log(t.detail),K.$emit("contig_emited",t.detail)}),t.addEventListener("element_select",function(t){console.log(t.detail),K.$emit("element_emited",t.detail)}),this.loading=!1},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},method:{}},Y={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"circos"}})},staticRenderFns:[]};var tt=a("VU/8")(Z,Y,!1,function(t){a("EEll")},"data-v-c6b5938a",null).exports,et=a("mtWM"),at=a.n(et),nt=function(t,e){return console.log(Object({NODE_ENV:"production"}).BASE_URL),at.a.get("/static/data/"+t+"/samples/"+e+".json")},st=function(t){return at.a.get("/static/data/"+t+"/set.json")},it=function(){return at.a.get("/static/data/collections.json")},rt=function(t){return at.a.get("/static/data/"+t+"/set/pangenome_cluster.json")},lt=function(t){return at.a.get("/static/data/"+t+"/set/pangenome_summary.json")},ot=function(t){return at.a.get("/static/data/"+t+"/set/amrheatmap.json")},ct=function(t,e){return at.a.get("/static/data/"+t+"/set/alignments/"+e+".json")};a("FNwM");a.e(8).then(a.bind(null,"rs0g")),a.e(2).then(a.bind(null,"PMNR")),a.e(4).then(a.bind(null,"EWlk")),a.e(1).then(a.bind(null,"WbLe")),Promise.all([a.e(0),a.e(3)]).then(a.bind(null,"++rn")),Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"17jO")),Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"JwpU")),Promise.all([a.e(0),a.e(5)]).then(a.bind(null,"wtxW"));var dt={name:"SingleSample",components:{ContigLengthChart:W,GenomeBrowser:J,GenomeCircosBrowser:tt},data:function(){var t;return t={activeNames:["1"],sample_info:void 0,antibiotics_tags:[],plasmid_tags:[],virulome_tags:[],speciesData:void 0,mlstData:void 0,pmlstData:void 0,plasmidData:void 0,resistomeData:void 0,virulomeData:void 0,assemblyData:void 0,pointData:void 0,skewData:void 0,contentData:void 0,annotationData:void 0},g()(t,"sample_info",void 0),g()(t,"loaded",!1),t},computed:{sampleId:function(){return this.$route.params.sid},collectionId:function(){return this.$route.params.cid}},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,p.a.all([t.fetchData()]);case 3:t.loadTable();case 4:case"end":return e.stop()}},e,t)}))()},methods:{loadTable:function(){for(var t=a("7t+N"),e=[],n=0;n<this.assemblyData.contigs.length;n++){var s=[this.assemblyData.contigs[n].name,this.assemblyData.contigs[n].length];e.push(s)}var i=t("#assembly_table").DataTable({data:e,dom:"Bfrtip",buttons:["csv","excel","pdf"],columns:[{title:"Contig"},{title:"Length"}]});t("#amr_table").DataTable({dom:"Bfrtip",buttons:["csv","excel","pdf"]}),t("#virulome_table").DataTable({dom:"Bfrtip",buttons:["csv","excel","pdf"]}),t("#assembly_table tbody").on("click","td.sorting_1",function(){var e=i.row(t(this)).data();console.log(e),K.$emit("contig_emited",e[0]),t(this).hasClass("selected")?t(this).removeClass("selected"):(i.$("tr.selected").removeClass("selected"),t(this).addClass("selected"))});var r=[];for(var l in this.sample_info.metadata){s=[l,this.sample_info.metadata[l]];r.push(s)}t("#metadata_table").DataTable({data:r});var o=[];console.log(this.mlstData.hits);for(n=0;n<this.mlstData.hits.length;n++){s=[this.mlstData.hits[n].locus,this.mlstData.hits[n].allele];o.push(s)}t("#mlst_table").DataTable({data:o,columns:[{title:"Locus"},{title:"Allele"}]})},fetchData:function(){var t=this;return v()(d.a.mark(function e(){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(t.collectionId,t.sampleId);case 2:for(a=e.sent,n=0;n<a.data.result.length;n++)0==a.data.result[n].group.localeCompare("MLST")?t.mlstData=a.data.result[n].data:"PLASMID"==a.data.result[n].group?t.plasmidData=a.data.result[n].data:"AMR"==a.data.result[n].group?t.resistomeData=a.data.result[n].data:"VIR"==a.data.result[n].group?t.virulomeData=a.data.result[n].data:"CONTIG"==a.data.result[n].group?(t.assemblyData=a.data.result[n].data,t.assemblyData.GC=o()(t.assemblyData.GC)+" %"):"SPECIES"==a.data.result[n].group?t.speciesData=a.data.result[n].data:"POINT"==a.data.result[n].group?t.pointData=a.data.result[n].data:"PMLST"==a.data.result[n].group?t.pmlstData=a.data.result[n].data:"ANNOTATION"==a.data.result[n].group&&(t.annotationData=a.data.result[n].data);t.sample_info={name:a.data.name,genus:a.data.genus,species:a.data.species,strain:a.data.strain,gram:a.data.gram,files:a.data.files,metadata:a.data.metadata},t.loaded=!0;case 6:case"end":return e.stop()}},e,t)}))()}}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[t.loaded?t._e():a("div",{staticClass:"center"},[a("div",{staticClass:"loader"}),t._v(" "),a("div",[t._v("Data loading...")])]),t._v(" "),t.loaded?a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[t._v(t._s(t.sampleId))]),t._v(" "),a("div",[a("div",[t._v("Sample name:"+t._s(t.sample_info.name))]),t._v(" "),a("div",[t._v("Genus:"+t._s(t.sample_info.genus))]),a("div",[t._v("Species:"+t._s(t.sample_info.species))]),a("div",[t._v("Strain:"+t._s(t.sample_info.strain))]),a("div",[t._v("Gram:"+t._s(t.sample_info.gram))]),t._v(" "),a("div",[t._v("Input Files:"+t._s(t.sample_info.files))])]),t._v(" "),a("h3",[t._v("Metadata")]),t._v(" "),t._m(0)]):t._e(),t._v(" "),t.loaded?a("div",{staticClass:"container"},[t._m(1),t._v(" "),a("div",{staticStyle:{float:"left",width:"100%"}},[a("div",{staticClass:"marR20"},[t._v("Genome length "),a("span",{staticClass:"bold mar10"},[t._v(t._s(t.assemblyData.genome_length))])]),t._v(" "),a("div",{staticClass:"marR20"},[t._v("Number of contigs "),a("span",{staticClass:"bold mar10"},[t._v(t._s(t.assemblyData.n_contig))])]),t._v(" "),a("div",{staticClass:"marR20"},[t._v("Min length "),a("span",{staticClass:"bold mar10"},[t._v(t._s(t.assemblyData.min_length))])]),t._v(" "),a("div",{staticClass:"marR20"},[t._v("Max length "),a("span",{staticClass:"bold mar10"},[t._v(t._s(t.assemblyData.max_length))])])]),t._v(" "),a("div",{staticStyle:{width:"100%"}},[a("ContigLengthChart",{attrs:{list_contig:t.assemblyData.contigs}})],1),t._v(" "),t._m(2)]):t._e(),t._v(" "),t.loaded?a("div",{staticClass:"container"},[t._m(3),t._v(" "),a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"left-align bold margin-r5"},[t._v("MLST:")]),t._v(" "),a("div",[t._v(t._s(t.mlstData.st))])]),t._v(" "),t._m(4)]):t._e(),t._v(" "),t.loaded?a("div",{staticClass:"container",staticStyle:{height:"650px"}},[a("div",{staticClass:"header"},[t._v("\n  Genome Browser\n")]),t._v(" "),a("div",[a("div",{staticStyle:{width:"500px",height:"300px",float:"left"}},[a("GenomeCircosBrowser",{attrs:{contigs:t.assemblyData.contigs,amr_genes:t.resistomeData.hits,virulome_genes:t.virulomeData.hits,skew:t.assemblyData.skew}})],1),t._v(" "),a("div",{staticStyle:{"margin-left":"500px",height:"300px"}},[a("GenomeBrowser",{attrs:{list_contig:t.assemblyData.contigs,knowngene:t.annotationData.genes,GC_skew:t.assemblyData.skew,GC_content:t.assemblyData.content.array}})],1)])]):t._e(),t._v(" "),t.loaded?a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[t._v("\nAntimicrobial resistance genes\n")]),t._v(" "),t.resistomeData?a("table",{staticClass:"display",attrs:{id:"amr_table"}},[t._m(5),t._v(" "),a("tbody",t._l(t.resistomeData.hits,function(e){return a("tr",{key:e.name},[a("td",[t._v(t._s(e.sequence))]),t._v(" "),a("td",[t._v(t._s(e.start))]),t._v(" "),a("td",[t._v(t._s(e.end))]),t._v(" "),a("td",[t._v(t._s(e.gene))]),t._v(" "),a("td",[t._v(t._s(e.identity))]),t._v(" "),a("td",[t._v(t._s(e.db))]),t._v(" "),a("td",[t._v(t._s(e.accession))]),t._v(" "),a("td",[t._v(t._s(e.resistance.replace(/\//g," ")))]),t._v(" "),a("td",[t._v(t._s(e.product))])])}),0)]):t._e()]):t._e(),t._v(" "),t.loaded?a("div",{staticClass:"container"},[a("div",{staticClass:"header"},[t._v("Virulome")]),t._v(" "),t.virulomeData?a("table",{staticClass:"display",attrs:{id:"virulome_table"}},[t._m(6),t._v(" "),a("tbody",t._l(t.virulomeData.hits,function(e){return a("tr",{key:e.name},[a("td",[t._v(t._s(e.sequence))]),t._v(" "),a("td",[t._v(t._s(e.start))]),t._v(" "),a("td",[t._v(t._s(e.end))]),t._v(" "),a("td",[t._v(t._s(e.gene))]),t._v(" "),a("td",[t._v(t._s(e.coverage))]),t._v(" "),a("td",[t._v(t._s(e.identity))]),t._v(" "),a("td",[t._v(t._s(e.db))]),t._v(" "),a("td",[t._v(t._s(e.accession))]),t._v(" "),a("td",[t._v(t._s(e.resistance))]),t._v(" "),a("td",[t._v(t._s(e.product))])])}),0)]):t._e()]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"display",attrs:{id:"metadata_table"}},[e("thead",[e("tr",[e("th",[this._v("Field")]),this._v(" "),e("th",[this._v("Value")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"header"},[this._v("Assembly Stats")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"100%"}},[e("table",{staticClass:"hover",attrs:{id:"assembly_table"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"header"},[this._v("MLST")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"100%"}},[e("table",{staticClass:"display",attrs:{id:"mlst_table"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Sequence")]),t._v(" "),a("th",[t._v("Start")]),t._v(" "),a("th",[t._v("End")]),t._v(" "),a("th",[t._v("Gene")]),t._v(" "),a("th",[t._v("Identity")]),t._v(" "),a("th",[t._v("Database")]),t._v(" "),a("th",[t._v("Accession")]),t._v(" "),a("th",[t._v("Resistance")]),t._v(" "),a("th",[t._v("Product")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Sequence")]),t._v(" "),a("th",[t._v("Start")]),t._v(" "),a("th",[t._v("End")]),t._v(" "),a("th",[t._v("Gene")]),t._v(" "),a("th",[t._v("Coverage")]),t._v(" "),a("th",[t._v("Identity")]),t._v(" "),a("th",[t._v("Database")]),t._v(" "),a("th",[t._v("Accession")]),t._v(" "),a("th",[t._v("Resistance")]),t._v(" "),a("th",[t._v("Product")])])])}]};var pt=a("VU/8")(dt,ht,!1,function(t){a("L+N6")},"data-v-6104b292",null).exports,ut={name:"PangenomePieChart",props:["core_data_url"],data:function(){return{loading:!1,core_data:void 0}},computed:{collectionId:function(){return this.$route.params.cid}},mounted:function(){var t=this;return v()(d.a.mark(function e(){var a,n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,a=document.getElementById("piechart"),n=new L(a),e.next=5,lt(t.collectionId);case 5:s=e.sent,t.core_data=s.data,console.log(t.core_data.group),n.load(t.core_data.group),n.draw(),t.loading=!1;case 11:case"end":return e.stop()}},e,t)}))()},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},method:{}},vt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"piechart"}})},staticRenderFns:[]};var mt=a("VU/8")(ut,vt,!1,function(t){a("STHg")},"data-v-c6220154",null).exports,gt={name:"GeneDistributionChart",props:["cluster_data"],data:function(){return{loading:!1}},mounted:function(){this.loading=!0;var t=document.getElementById("dischart"),e=new S(t);e.load(this.cluster_data),e.draw(),this.loading=!1},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},method:{}},_t={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"dischart"}})},staticRenderFns:[]};var ft=a("VU/8")(gt,_t,!1,function(t){a("8Hrj")},"data-v-0fe87bf6",null).exports,yt={name:"PhylogenyBrowser",props:["newitck_tree","samples"],data:function(){return{loading:!1}},mounted:function(){this.loading=!0;var t=document.getElementById("treeview"),e=new N(t),a=this.newitck_tree.replace(/.ref/g,"");a=a.replace(/_contigs.fasta/g,"");for(var n={},s=0;s<this.samples.length;s++)n[this.samples[s].id]=this.samples[s].metadata;e.load(a,n),e.draw(),e.tree.on("updated",function(t){var e=t.property,a=t.nodeIds;if("selected"===e){for(var n=[],s=0;s<a.length;s++)n.push(a[s].replace(/\'/g,""));console.log(n),K.$emit("samples_emited",n)}}),this.loading=!1},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},method:{}},wt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"treeview"}})},staticRenderFns:[]};var bt=a("VU/8")(yt,wt,!1,function(t){a("SH0a")},"data-v-3f0cec3f",null).exports,kt={name:"Heatmap",props:["newitck_tree","heatmap_url"],data:function(){return{loading:!1,list_type:[],list_amr_hits:[],list_vir_hits:[],list_amr_class:[],list_vir_class:[],heatmapview:void 0,selected_data:"amr",tree_data:void 0,heatmap:void 0}},mounted:function(){var t=this;return v()(d.a.mark(function e(){var a,n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,ot(t.collectionId);case 3:for(a=e.sent,t.heatmap=a.data,t.list_type=[{type:"amr",name:"AMR genes"},{type:"vir",name:"Virulome genes"}],t.selected_data="amr",n=0;n<t.heatmap.hits.length;n++)"amr"==t.heatmap.hits[n].type&&(t.list_amr_hits.push(t.heatmap.hits[n]),t.list_amr_class.includes(t.heatmap.hits[n].class)||t.list_amr_class.push(t.heatmap.hits[n].class)),"vir"==t.heatmap.hits[n].type&&t.list_vir_hits.push(t.heatmap.hits[n]);s=document.getElementById("heatmap"),t.heatmapview=new H(s),t.tree_data=t.newitck_tree.replace(/.ref/g,""),t.tree_data=t.tree_data.replace(/_contigs.fasta/g,""),t.heatmapview.load(t.tree_data,t.list_amr_hits),t.heatmapview.draw(),K.$on("samples_emited",function(e){console.log("sample_emited "+e),t.heatmapview.setActiveNames(e)}),t.loading=!1;case 16:case"end":return e.stop()}},e,t)}))()},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},computed:{collectionId:function(){return this.$route.params.cid}},methods:{onChangeData:function(t){console.log(this.selected_data),"amr"==this.selected_data&&this.heatmapview.load(this.tree_data,this.list_amr_hits),"vir"==this.selected_data&&this.heatmapview.load(this.tree_data,this.list_vir_hits),this.heatmapview.draw()}}},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"padding-bottom":"10px","border-bottom":"1px solid #aaa"}},[t.list_type?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_data,expression:"selected_data"}],attrs:{name:"type",id:"type"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected_data=e.target.multiple?a:a[0]},t.onChangeData]}},t._l(t.list_type,function(e){return a("option",{key:e.name,domProps:{value:e.type}},[t._v(t._s(e.name))])}),0):t._e()]),t._v(" "),a("div",{staticStyle:{width:"100%"},attrs:{id:"heatmap"}})])},staticRenderFns:[]};var xt=a("VU/8")(kt,Ct,!1,function(t){a("pfq6")},null,null).exports,jt={name:"AlignmentComp",props:["alignmentData"],data:function(){return{loading:!1,list_alignments:[],current_alignment:void 0,alignmentview:void 0}},computed:{collectionId:function(){return this.$route.params.cid}},mounted:function(){var t=this;return v()(d.a.mark(function e(){var a,n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,a=document.getElementById("aligmentview"),t.list_alignments=t.alignmentData.alignments,e.next=5,ct(t.collectionId,t.alignmentData.alignments[0].gene);case 5:n=e.sent,t.current_alignment=n.data,t.alignmentview=new q(a),s=(s=atob(t.alignmentData.alignments[0].tree).replace(/.ref/g,"")).replace(/.fasta/g,""),t.alignmentview.load(t.alignmentData.alignments[0].gene,s,t.current_alignment,void 0),t.alignmentview.draw(),K.$on("gene_id_emited",function(e){t.loading=!0,t.reloadAlignment(e),t.loading=!1}),K.$on("samples_emited",function(e){t.loading=!0,t.alignmentview.setActiveNames(e),t.loading=!1}),t.loading=!1;case 15:case"end":return e.stop()}},e,t)}))()},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},methods:{reloadAlignment:function(t){var e=this;return v()(d.a.mark(function a(){var n,s,i;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=0;case 1:if(!(n<e.list_alignments.length)){a.next=15;break}if(e.list_alignments[n].gene!=t){a.next=12;break}return s=(s=atob(e.alignmentData.alignments[n].tree).replace(/.ref/g,"")).replace(/.fasta/g,""),a.next=7,ct(e.collectionId,t);case 7:return i=a.sent,e.current_alignment=i.data,e.alignmentview.load(e.alignmentData.alignments[n].gene,s,e.current_alignment),e.alignmentview.draw(),a.abrupt("break",15);case 12:n++,a.next=1;break;case 15:case"end":return a.stop()}},a,e)}))()}}},Et={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticStyle:{width:"100%"},attrs:{id:"aligmentview"}})])}]};var Dt=a("VU/8")(jt,Et,!1,function(t){a("rcnl")},null,null).exports;a.e(8).then(a.bind(null,"rs0g")),a.e(2).then(a.bind(null,"PMNR")),a.e(4).then(a.bind(null,"EWlk")),a.e(1).then(a.bind(null,"WbLe")),Promise.all([a.e(0),a.e(3)]).then(a.bind(null,"++rn")),Promise.all([a.e(0),a.e(7)]).then(a.bind(null,"17jO")),Promise.all([a.e(0),a.e(6)]).then(a.bind(null,"JwpU")),Promise.all([a.e(0),a.e(5)]).then(a.bind(null,"wtxW"));var At={name:"Collection",components:{PangenomePieChart:mt,GeneDistributionChart:ft,PhylogenyBrowser:bt,Heatmap:xt,AlignmentComp:Dt},data:function(){var t;return t={coreDataURL:void 0,phylogenyData:void 0,geneClusterData:void 0,geneClusterURL:void 0},g()(t,"coreDataURL",void 0),g()(t,"phyloHeatmapURL",void 0),g()(t,"alignmentData",void 0),g()(t,"isLoading",!0),g()(t,"list_sample",[]),g()(t,"isReady",!1),t},computed:{collectionId:function(){return this.$route.params.cid}},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,p.a.all([t.fetchData()]);case 3:t.loadData();case 4:case"end":return e.stop()}},e,t)}))()},methods:{fetchData:function(){var t=this;return v()(d.a.mark(function e(){var a,n,s,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isReady=!1,e.next=3,st(t.collectionId);case 3:for(a=e.sent,console.log(a),n=a.data.results,t.list_sample=a.data.samples,s=0;s<n.length;s++)"phylogeny_tree"==n[s].group&&(t.phylogenyData=atob(n[s].data)),"pan_sum"==n[s].group&&(t.coreDataURL=n[s].data),"pan_cluster"==n[s].group&&(t.geneClusterURL=n[s].data),"phylo_heatmap"==n[s].group&&(t.phyloHeatmapURL=n[s].data),"gene_alignments"==n[s].group&&(t.alignmentData=n[s].data);return e.next=10,rt(t.collectionId);case 10:for(i=e.sent,t.geneClusterData=i.data,t.geneClusterData.genes.sort(function(t,e){return e.noisolates-t.noisolates}),s=0;s<t.geneClusterData.genes.length;s++)t.geneClusterData.genes[s].id=s+1;t.isLoading=!1,t.isReady=!0;case 16:case"end":return e.stop()}},e,t)}))()},loadData:function(){for(var t=a("7t+N"),e=[],n=0;n<this.geneClusterData.genes.length;n++){var s=[this.geneClusterData.genes[n].gene,this.geneClusterData.genes[n].annotation,this.geneClusterData.genes[n].noisolates,this.geneClusterData.genes[n].nosequences,this.geneClusterData.genes[n].length];e.push(s)}var i=t("#cluster_table").DataTable({data:e,dom:"Bfrtip",buttons:["csv","excel","pdf"]});t("#cluster_table tbody").on("click","tr",function(){var e=i.row(t(this)).data();console.log("gene_id_emited"+e[0]),K.$emit("gene_id_emited",e[0]),t(this).hasClass("selected")?t(this).removeClass("selected"):(i.$("tr.selected").removeClass("selected"),t(this).addClass("selected"))}),t(i.column(0).nodes()).addClass("highlight"),t("#cluster_table tbody").on("mouseenter","td",function(){var e=i.cell(this).index().column;console.log(e),t(i.cells().nodes()).removeClass("highlight"),t(i.row(e).nodes()).addClass("highlight")});var r=[];for(n=0;n<this.list_sample.length;n++){s=[this.list_sample[n].id,this.list_sample[n].name,this.list_sample[n].genus,this.list_sample[n].species,this.list_sample[n].strain,this.list_sample[n].files,this.list_sample[n].download,this.list_sample[n].metadata];r.push(s)}var l=t("#samples_table").DataTable({data:r,columns:[{title:"Sample ID"},{title:"Name"},{title:"Genus"},{title:"Species"},{title:"Strain"},{title:"Files"},{title:"Download"},{title:"Metadata",className:"details-control",orderable:!1,data:null,defaultContent:"Click to open"}],columnDefs:[{targets:5,render:function(t,e,a){for(var n="",s=0;s<a[6].length;s++){var i=a[6][s].file;n+="<a href='"+(i=i.replace("web-app/",""))+"'>"+a[6][s].name+"</a>&nbsp;"}return n}},{visible:!1,targets:[6]}]}),o=this.collectionId;t("#samples_table tbody").on("click","td.sorting_1",function(){var e=l.row(t(this)).data();window.open("/"+o+"/"+e[0],"_blank")});t("#samples_table tbody").on("click","td.details-control",function(){var e=t(this).closest("tr"),a=l.row(e);a.child.isShown()?(a.child.hide(),e.removeClass("shown")):(a.child(function(t){console.log(t);var e='<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">';for(var a in t)e+="<tr><td>"+a+"</td><td>"+t[a]+"</td></tr>";return e+="</table>"}(a.data()[7])).show(),e.addClass("shown"))})}}},Tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[t.isLoading?a("div",{staticClass:"center"},[a("div",{staticClass:"loader"}),t._v(" "),a("div",[t._v("Data loading...")])]):t._e(),t._v(" "),a("div",[a("h1",[t._v(t._s(t.collectionId))])]),t._v(" "),t.isReady?a("div",{staticClass:"container margin20"},[a("div",{staticClass:"header"},[t._v("Samples")]),t._v(" "),a("table",{staticClass:"display",attrs:{id:"samples_table"}})]):t._e(),t._v(" "),t.isReady?a("div",{staticClass:"container",staticStyle:{height:"500px"}},[a("div",{staticClass:"header"},[t._v("Core and Accesory Genes")]),t._v(" "),t.coreDataURL?a("div",{staticStyle:{float:"left",width:"50%"}},[a("PangenomePieChart",{attrs:{core_data_url:t.coreDataURL}})],1):t._e(),t._v(" "),t.geneClusterData?a("div",{staticStyle:{float:"left",width:"50%"}},[a("GeneDistributionChart",{attrs:{cluster_data:t.geneClusterData.genes}})],1):t._e()]):t._e(),t._v(" "),t.geneClusterData?a("div",{staticClass:"container margin20"},[a("div",{staticClass:"header"},[t._v("Gene clusters")]),t._v(" "),t._m(0)]):t._e(),t._v(" "),t.alignmentData?a("div",{staticClass:"container margin20",staticStyle:{clear:"both"}},[a("div",{staticClass:"header"},[t._v("Genes Alignment")]),t._v(" "),a("AlignmentComp",{attrs:{alignmentData:t.alignmentData}})],1):t._e(),t._v(" "),t.phylogenyData?a("div",{staticClass:"container margin20",staticStyle:{clear:"both","margin-bottom":"30px"}},[a("div",{staticClass:"header"},[t._v("Heatmap")]),t._v(" "),a("Heatmap",{attrs:{newitck_tree:t.phylogenyData,heatmap_url:t.phyloHeatmapURL}})],1):t._e(),t._v(" "),t.phylogenyData?a("div",{staticClass:"container margin20",staticStyle:{clear:"both"}},[a("div",{staticClass:"header"},[t._v("Phylogeny tree")]),t._v(" "),a("PhylogenyBrowser",{attrs:{newitck_tree:t.phylogenyData,samples:t.list_sample}})],1):t._e()])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"display hover",attrs:{id:"cluster_table"}},[a("thead",[a("tr",[a("th",[t._v("Gene")]),t._v(" "),a("th",[t._v("Annotation")]),t._v(" "),a("th",[t._v("Number of Isolate")]),t._v(" "),a("th",[t._v("Number of sequences")]),t._v(" "),a("th",[t._v("Avg Length")])])])])}]};var Gt=a("VU/8")(At,Tt,!1,function(t){a("Ak1/")},"data-v-4b1cd21d",null).exports;a.e(1).then(a.bind(null,"WbLe"));var Lt={name:"CollectionList",components:{},data:function(){return{isLoading:!0,list_collection:[],isReady:!1}},computed:{},created:function(){var t=this;return v()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,p.a.all([t.fetchData()]);case 3:t.loadData();case 4:case"end":return e.stop()}},e,t)}))()},methods:{fetchData:function(){var t=this;return v()(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isReady=!1,e.next=3,it();case 3:a=e.sent,t.list_collection=a.data.collections,t.isLoading=!1,t.isReady=!0;case 7:case"end":return e.stop()}},e,t)}))()},loadData:function(){for(var t=a("7t+N"),e=[],n=0;n<this.list_collection.length;n++){var s=[this.list_collection[n].collectionID,this.list_collection[n].collectionName,this.list_collection[n].status];e.push(s)}var i=t("#collection_table").DataTable({data:e,columns:[{title:"Collection ID"},{title:"Name"},{title:"Status"},{title:"Open",className:"details-control",orderable:!1,data:null,defaultContent:"Click to open"}]});t("#collection_table tbody").on("click","td.details-control",function(){var e=i.row(t(this)).data();window.open("/"+e[0],"_blank")})}}},St={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[t.isLoading?a("div",{staticClass:"center"},[a("div",{staticClass:"loader"}),t._v(" "),a("div",[t._v("Data loading...")])]):t._e(),t._v(" "),t._m(0),t._v(" "),t.isReady?a("div",{staticClass:"container margin20"},[a("table",{staticClass:"display",attrs:{id:"collection_table"}})]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("Collections")])])}]};var Rt=a("VU/8")(Lt,St,!1,function(t){a("gixU")},"data-v-5f7daee3",null).exports;n.a.use(r.a);var zt=new r.a({mode:"history",routes:[{path:"/:cid/:sid",component:pt},{path:"/:cid",component:Gt},{path:"/",component:Rt}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:zt,render:function(t){return t(i)}})},SH0a:function(t,e){},STHg:function(t,e){},gixU:function(t,e){},pfq6:function(t,e){},rcnl:function(t,e){},uslO:function(t,e,a){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(t){return a(i(t))}function i(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id="uslO"},ymcE:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6c7d11f057d38cceaca4.js.map